<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a3f590600d89a26dc433.css">@font-face{font-family:quote;src:local("Lantinghei SC"),local("SimSun");unicode-range:U+201c,U+201d}*{box-sizing:border-box;border:none;margin:0;padding:0}body{font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:18px;line-height:28.8px;background-color:#fff;-webkit-text-size-adjust:100%}a{color:#e10098;text-decoration:none}a:focus,a:hover{text-decoration:underline}p{margin:1em 0}em{font-style:italic}h1,h2,h3,h4,h5,h6{margin:2em 0 0;text-rendering:optimizelegibility}h1{font-size:40px;line-height:56px}h1,h2{font-family:quote,Rubik,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020}h2{font-size:30px;line-height:42px}h3{font-size:22px;line-height:30.8px}h3,h4{font-family:quote,Rubik,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020}h4{font-size:18px;line-height:25.2px}h5{font-size:15px;line-height:21px}h5,h6{font-family:quote,Rubik,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020}h6{font-size:13px;line-height:18.2px}h1>.anchor,h2>.anchor,h3>.anchor,h4>.anchor,h5>.anchor,h6>.anchor{margin-top:-50px;position:absolute}.hash-link{color:#aaa;visibility:hidden}h1:hover>.hash-link,h2:hover>.hash-link,h3:hover>.hash-link,h4:hover>.hash-link,h5:hover>.hash-link,h6:hover>.hash-link{visibility:visible}ol,ul{margin:1em 0 1em 2em;padding:0}p+ol,p+ul{margin-top:1em}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}li{margin-bottom:1em}hr{height:0;border-top:1px solid #ccc;border-bottom:1px solid #eee}li code,p code{font-family:Roboto Mono,Menlo,Monaco,monospace;font-weight:400;line-height:19.61538462px;background-color:#f8f8f8;border-radius:2px;padding:4px 4px 2px;margin:0 -1px}header,li code,p code{color:#202020;font-size:15px}header{font-family:quote,Rubik,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;line-height:21px;height:50px;background:#fff;box-shadow:inset 0 -1px 0 0 rgba(0,0,0,.1);z-index:10;top:0;width:100%;position:-webkit-sticky;position:sticky}header .nav-home{float:left;font-size:18px;color:#e10098;line-height:50px;display:inline-block;padding-right:1em;text-decoration:none}header .nav-home img{vertical-align:-9px;margin-right:6px;width:30px;height:30px}@media screen and (min-width:1020px){nav{float:left}}@media screen and (max-width:1019px){nav{text-align:center;margin:0 -1em}}nav a{color:#aaa;display:inline-block;line-height:50px;padding:0 1em;transition:color .1s ease-out}nav a.active,nav a:focus,nav a:hover{color:#202020;text-decoration:none}section{max-width:1080px;margin:0 auto;padding:0 20px}footer{font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:15px;line-height:24px;background:#2a3746;box-shadow:inset 0 10px 10px -5px #0d1116;padding-top:2em;padding-bottom:2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}footer .sitemap{display:flex;justify-content:space-between;margin-bottom:3em}footer .sitemap div{flex:1 1}footer .sitemap .nav-home{display:table;margin:-12px 20px 0 0;padding:10px;width:50px;height:50px;background:url(/img/logo-gray.svg) no-repeat content-box}footer .sitemap .nav-home:focus,footer .sitemap .nav-home:hover{background-image:url(/img/logo.svg)}@media screen and (max-width:740px){footer .sitemap .nav-home{display:none}}footer .sitemap a{color:#fff;display:table;margin:2px -10px;padding:3px 10px}footer .sitemap a:focus,footer .sitemap a:hover{color:#e10098;text-decoration:none}footer .sitemap h5,footer .sitemap h6{margin:0 0 10px}footer .sitemap h5,footer .sitemap h5>a,footer .sitemap h6,footer .sitemap h6>a{color:#869cb6}footer .sitemap h5>a,footer .sitemap h6>a{margin:0 -10px}footer .fbOpenSource{display:block;margin:1em auto;opacity:.4;transition:opacity .15s ease-in-out;width:170px}footer .fbOpenSource:hover{opacity:1}footer .copyright{color:hsla(0,0%,100%,.4);text-align:center}.guestBio{background:#f9f0f3;border-top:2px solid #e0c3c8;font-style:italic;margin:1em -10px;padding:10px}.blogContent{*zoom:1;padding-top:20px}.blogContent:after,.blogContent:before{content:" ";display:table}.blogContent:after{clear:both}.blogContent blockquote{padding:5px 15px;margin:20px 0;background-color:#f8f5ec;border-left:5px solid #f7ebc6}.blogContent img{max-width:100%}div[data-twttr-id] iframe{margin:10px auto!important}p+.apiIndex{margin-top:0}.apiIndex{list-style:none;margin:0 0 30px}.apiIndex li{margin:0 0 5px;color:rgba(0,0,0,.35)}.apiIndex li a{color:inherit;display:block;position:relative;text-decoration:none}.apiIndex li a:hover:before{color:#e10098;content:"#";font-size:16px;left:-2em;line-height:20px;position:absolute}.apiIndex .prism{margin-bottom:0}.apiIndex pre{font-family:Roboto Mono,Menlo,Monaco,monospace;font-weight:400;color:#202020;direction:ltr;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;-moz-tab-size:2;-o-tab-size:2;tab-size:2;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}.apiIndex li,.apiIndex pre{font-size:13px;line-height:17px}.apiIndex li{padding:7px 14px;background:#fff;box-shadow:inset 0 0 0 1px #eee,inset 4px 0 0 #eee;border-radius:3px;margin-left:-4px}div.index{background:#f5f6f8}@media screen and (min-width:1020px){div.index{margin-top:50px}}div.index header{display:none}@media screen and (min-width:1020px){div.index header{display:block;position:fixed;top:0;left:0;right:0}}div.index .fixedSearch{position:fixed;right:0;left:0;z-index:12;pointer-events:none}div.index .hero{background:#171e26;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media screen and (min-width:1020px){div.index .hero{min-height:450px;max-height:900px;height:65vh;margin-top:-50px;padding-top:50px;z-index:11}}div.index .hero:before{background:url(/img/graph-wash.png) repeat 50%;content:"";height:100%;position:absolute;top:0;width:100%}div.index .hero header{background:linear-gradient(rgba(23,30,38,.8),rgba(23,30,38,0));box-shadow:none;display:block}@media screen and (min-width:1020px){div.index .hero header{min-height:80px;max-height:160px;height:13vh}}div.index .hero header nav>a{text-shadow:0 1px 1px #171e26,0 0 3px #171e26}div.index .hero header nav>a:focus,div.index .hero header nav>a:hover{color:#fff}@media screen and (min-width:1020px){div.index .hero header nav>a:first-child{margin-left:-1em}}div.index .hero .abs{position:relative}@media screen and (min-width:1020px){div.index .hero .abs{position:absolute;top:0;left:0;bottom:0;right:0;clip:rect(0,auto,auto,0);overflow:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column}}div.index .hero .intro{clear:both;display:flex;max-width:1070px;flex-direction:column}@media screen and (min-width:1020px){div.index .hero .intro{margin-top:-3%;flex-direction:row}}div.index .hero .named-logo{text-align:center;animation:fade 1.2s ease-in-out;animation-fill-mode:both;margin-right:18px}div.index .hero .named-logo h1{color:#e10098;margin:.25em 0 0;font-size:30px;line-height:1}div.index .hero .named-logo img{margin:0 auto;display:block;width:90px;height:90px}@media screen and (max-width:55rem){div.index .hero .named-logo img{margin-top:3rem}}div.index .hero .marketing-col{flex:1 1;padding:0 18px;margin:20px 18px}@media screen and (min-width:1020px){div.index .hero .marketing-col{margin:3px 18px}}@media screen and (max-width:1019px){div.index .hero .marketing-col{text-align:center}}div.index .hero .marketing-col h3{color:#fff;margin:0 0 1em;line-height:1;white-space:pre}div.index .hero .marketing-col .prism{-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto;color:#fff}@media screen and (max-width:1019px){div.index .hero .marketing-col .prism{display:inline-block}}@media screen and (min-width:1020px){div.index .hero .marketing-col:last-child>.prism{margin-right:-20px}}div.index .hero .marketing-col:nth-child(2){animation:fade 1s ease-in-out 1s both}div.index .hero .marketing-col:nth-child(3){animation:fade 1s ease-in-out 1.5s both}div.index .hero .marketing-col:nth-child(4){animation:fade 1s ease-in-out 2s both}@keyframes fade{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translate(0)}}div.index .hero .buttons-unit{animation:fade 1.1s ease-in-out 3.2s both;width:100%}@media screen and (min-width:1020px){div.index .hero .buttons-unit{position:absolute;top:75%;text-align:center}}@media screen and (max-width:1019px){div.index .hero .buttons-unit{padding:1em 0 2em;text-align:center}}div.index .hero .buttons-unit .button{font-family:quote,Rubik,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#fff;font-size:17px;line-height:23.8px;border:1px solid hsla(0,0%,100%,.4);border-radius:6px;line-height:1;transition:background .1s ease-out,color .1s ease-out;padding:.6em 1.6em;margin:0 .8em;display:inline-block;text-decoration:none}div.index .hero .buttons-unit .button:active,div.index .hero .buttons-unit .button:focus,div.index .hero .buttons-unit .button:hover{color:#202020;background:#fff;text-decoration:none}div.index section h1,div.index section h2{margin-top:0}div.index section.lead{font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:22px;line-height:35.2px;text-align:center;max-width:760px;padding-top:6em}div.index .grayWash{background:#e6e8ec;position:relative}div.index .darkWash{background:#3d464f;box-shadow:inset 0 30px 30px -30px rgba(0,0,0,.35),inset 0 -20px 30px -30px rgba(0,0,0,.35);overflow:hidden;position:relative}div.index .window{background:#fff;border-radius:6px 6px 0 0;box-shadow:0 0 0 1px rgba(0,0,0,.1),0 8px 32px rgba(0,0,0,.12);margin:0 -15px;overflow:hidden;padding-top:26px;position:relative}div.index .window:before{background:linear-gradient(#f0f0f0,#dedede);border-radius:6px 6px 0 0;box-shadow:inset 0 2px 2px -2px #fff,0 1px rgba(0,0,0,.4);content:" ";display:block;height:25px;position:absolute;top:0;width:100%}div.index .window .prism{padding:1ch}div.index section.point1,div.index section.point2,div.index section.point3,div.index section.point4,div.index section.point5,div.index section.point6{align-items:center;display:flex;flex-direction:column;padding-bottom:4em;padding-top:4em;min-height:75vh}@media screen and (max-width:1019px){div.index section.point1,div.index section.point2,div.index section.point3,div.index section.point4,div.index section.point5,div.index section.point6{min-height:none}div.index section.point1 .prose,div.index section.point2 .prose,div.index section.point3 .prose,div.index section.point4 .prose,div.index section.point5 .prose,div.index section.point6 .prose{text-align:center}}@media screen and (min-width:1020px){div.index section.point1{flex-direction:row-reverse;justify-content:space-between}}div.index section.point1 .prose{max-width:415px}div.index section.point1 .faux-graphiql{width:440px;height:330px;display:flex;flex-direction:column;pointer-events:none}div.index section.point1 .faux-graphiql .query,div.index section.point1 .faux-graphiql .response{flex:1 1}div.index section.point1 .faux-graphiql .query{border-bottom:5px solid #e0e0e0}div.index section.point1 .faux-graphiql .cursor{width:7px;height:15px;background-color:#d0d0d0;display:inline-block;margin:-1px 1px -3px;animation:cursor-blink .5s linear infinite alternate both}@keyframes cursor-blink{0%,30%{opacity:0}70%,to{opacity:1}}div.index section.point1 .faux-graphiql .ch{display:none}@media screen and (min-width:1020px){div.index section.point2{flex-direction:row;justify-content:space-between}}div.index section.point2 .prose{max-width:415px}div.index section.point2 .app-to-server{width:476px;height:500px;position:relative;pointer-events:none;margin:-35px -10px}@media screen and (max-width:1019px){div.index section.point2 .app-to-server{margin-top:0}}div.index section.point2 .app-to-server .phone,div.index section.point2 .app-to-server .server{position:absolute;left:0;right:0}div.index section.point2 .app-to-server .phone{bottom:0}div.index section.point2 .app-to-server .server{top:0}div.index section.point2 .app-to-server .query,div.index section.point2 .app-to-server .response{position:absolute}div.index section.point2 .app-to-server .query{animation:query-up 6s ease-in 0s infinite both;left:175px}@keyframes query-up{0%{opacity:0;top:230px}5%,25%{opacity:1}40%{opacity:0}50%,to{top:150px;opacity:0}}div.index section.point2 .app-to-server .response{animation:response-down 6s ease-in 2.3s infinite both;left:135px}@keyframes response-down{0%{opacity:0;top:130px}10%{opacity:0}25%,45%{opacity:1}50%,to{opacity:0;top:200px}}@media screen and (min-width:1020px){div.index section.point3{flex-direction:row-reverse;justify-content:space-between}}div.index section.point3 .prose{max-width:415px}div.index section.point3 .strong-typed-query{width:480px;display:flex;pointer-events:none}div.index section.point3 .strong-typed-query .query,div.index section.point3 .strong-typed-query .type-system{background:#fff;flex:1 1;position:relative}div.index section.point3 .strong-typed-query .query{border-right:5px solid #e0e0e0}div.index section.point3 .strong-typed-query .highlight{position:absolute;left:0;right:0;height:18px;top:8px;background:#e5eaf0}div.index section.point4{color:#fff;flex-direction:column;padding-bottom:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}div.index section.point4 h2{color:#fff}div.index section.point4 em{font-family:Palatino,Georgia,serif}div.index section.point4 .prose{display:flex;flex-direction:column;flex:1 1;justify-content:center;margin:0 auto;max-width:575px;text-align:center}div.index section.point4 .prose a{color:#ff7bd4}div.index section.point4 .graphiqlVid{background:#fff;border-radius:6px 6px 0 0;box-shadow:0 0 0 1px rgba(0,0,0,.2),0 16px 64px rgba(0,0,0,.6);margin:3em -10px 0;overflow:hidden;padding-top:40%;pointer-events:none;position:relative;transform:translateZ(0);width:100%}div.index section.point4 .graphiqlVid video{position:absolute;top:0;left:0;width:100%}@media screen and (min-width:1020px){div.index section.point5{flex-direction:row-reverse;justify-content:space-between}}div.index section.point5 .prose{max-width:415px}div.index section.point5 .type-evolution{width:519px;pointer-events:none;overflow-x:hidden}div.index section.point5 .type-evolution .add{font-family:Roboto Mono,Menlo,Monaco,monospace;font-weight:400;color:#006a00;font-size:13px;line-height:17px;background:#eaffea;border-left:1px solid #b7ffb7}div.index section.point5 .type-evolution .add:before{content:"+"}div.index section.point5 .type-evolution .remove{font-family:Roboto Mono,Menlo,Monaco,monospace;font-weight:400;color:#6d0000;font-size:13px;line-height:17px;background:#ffecec;border-left:1px solid #ffb9b9}div.index section.point5 .type-evolution .remove:before{content:"-"}div.index section.point5 .type-evolution .add,div.index section.point5 .type-evolution .remove{opacity:0;transition:opacity .5s ease-in-out;position:absolute;left:-1px;right:0;height:18px;padding-left:2px}div.index section.point5 .type-evolution #typeEvolveView{display:flex;left:0;margin-left:-1px;position:relative;width:1300px}div.index section.point5 .type-evolution #typeEvolveView .v1,div.index section.point5 .type-evolution #typeEvolveView .v2,div.index section.point5 .type-evolution #typeEvolveView .v3,div.index section.point5 .type-evolution #typeEvolveView .v4,div.index section.point5 .type-evolution #typeEvolveView .v5{border-left:1px solid #eee;flex:1 1;padding:4px 6px 18px;position:relative;width:260px}div.index section.point5 .type-evolution #typeEvolveView.step0 .v2{opacity:0}div.index section.point5 .type-evolution #typeEvolveView.step1 .v2{opacity:1;transition:opacity .5s ease-in-out}div.index section.point5 .type-evolution #typeEvolveView.step1 .v2 .add{opacity:1}div.index section.point5 .type-evolution #typeEvolveView.step2{left:-260px;transition:left .5s ease-in-out}div.index section.point5 .type-evolution #typeEvolveView.step2 .v3 .add{opacity:1}div.index section.point5 .type-evolution #typeEvolveView.step3{left:-520px;transition:left .5s ease-in-out}div.index section.point5 .type-evolution #typeEvolveView.step3 .v4 .add{opacity:1}div.index section.point5 .type-evolution #typeEvolveView.step4{left:-780px;transition:left .5s ease-in-out}div.index section.point5 .type-evolution #typeEvolveView.step4 .v4 .remove,div.index section.point5 .type-evolution #typeEvolveView.step4 .v5 .add{opacity:1}div.index section.point5 .type-evolution #typeEvolveView.step5{left:-1040px;transition:left .5s ease-in-out}div.index section.point5 .type-evolution #typeEvolveView.step5 .v4 .remove{opacity:1}div.index section.point5 .type-evolution #typeEvolveView.step6 .v2{opacity:0}div.index section.point5 .type-evolution #typeEvolveView.step6 .v5{left:-1040px;opacity:0;transition:opacity .5s ease-in-out}div.index section.point5 .type-evolution .v2 .add{top:80px}div.index section.point5 .type-evolution .v3 .add{top:97px}div.index section.point5 .type-evolution .v4 .add:first-child{top:114px}div.index section.point5 .type-evolution .v4 .add:nth-child(2){top:165px}div.index section.point5 .type-evolution .v4 .add:nth-child(3){top:182px}div.index section.point5 .type-evolution .v4 .add:nth-child(4){top:199px}div.index section.point5 .type-evolution .v4 .add:nth-child(5){top:216px}div.index section.point5 .type-evolution .v4 .add:nth-child(6){top:233px}div.index section.point5 .type-evolution .v4 .remove,div.index section.point5 .type-evolution .v5 .add{top:97px}@media screen and (min-width:1020px){div.index section.point6{flex-direction:row;justify-content:space-between}}div.index section.point6 .prose{max-width:415px}div.index section.point6 .leverage-code{width:520px;overflow-y:hidden}div.index section.point6 .leverage-code #leverageCodeView{display:flex;flex-direction:row;left:0;position:relative;transition:left .5s ease-in-out;width:2080px}div.index section.point6 .leverage-code #leverageCodeView>pre{width:520px;position:relative;top:0}div.index section.point6 .leverage-code #leverageCodeView.step0{transition:none}div.index section.point6 .leverage-code #leverageCodeView.step1>pre:first-child,div.index section.point6 .leverage-code #leverageCodeView.step2>pre:first-child{line-height:68px;transition:top .5s ease-in-out,line-height .5s ease-in-out}div.index section.point6 .leverage-code #leverageCodeView.step1>pre:first-child:first-line,div.index section.point6 .leverage-code #leverageCodeView.step2>pre:first-child:first-line{line-height:17px}div.index section.point6 .leverage-code #leverageCodeView.step2{left:-520px}div.index section.point6 .leverage-code #leverageCodeView.step3{left:-1040px}div.index section.point6 .leverage-code #leverageCodeView.step4{left:-1560px}div.index section.point6 .leverage-code #leverageCodeView.step5{left:-2080px}div.index section.point6 .leverage-code #leverageCodeView.step5>pre:first-child{left:2080px}div.index section.powered-by{padding-bottom:6em;text-align:center}div.index section.powered-by .prose{max-width:545px;text-align:center;margin:0 auto}div.index section.powered-by .logos{align-items:center;display:flex;flex-flow:row wrap;justify-content:center}div.index section.powered-by .logos img{height:100px;padding:14px}@media screen and (min-width:1020px){div.index section.powered-by .logos img{height:150px;padding:20px}}div.index section.powered-by .logos img.round{height:106px;padding:11px}@media screen and (min-width:1020px){div.index section.powered-by .logos img.round{height:158px;padding:16px}}div.index section.powered-by .button{font-family:quote,Rubik,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:17px;line-height:23.8px;border:1px solid rgba(0,0,0,.4);border-radius:6px;line-height:1;transition:border .1s ease-out,background .1s ease-out,color .1s ease-out;padding:.65em 1.6em .6em;margin:2em;display:inline-block;text-decoration:none}div.index section.powered-by .button:active,div.index section.powered-by .button:focus,div.index section.powered-by .button:hover{color:#fff;background:#e10098;border-color:#e10098;text-decoration:none}.documentationContent{margin-top:3px;margin-bottom:8em;display:flex;width:100%;justify-content:space-between}@media screen and (max-width:740px){.documentationContent{margin-bottom:4em;display:block}}.headerline{display:flex}.main-block-blog{background-color:#fff;padding:10px;margin:10px 10px 100px;justify-content:center;position:relative;flex-flow:row;text-align:center}.column{box-sizing:border-box;border:3px #2c2626;justify-content:space-around;margin-right:15px}.container-bl,.container-bl1{display:flex;justify-content:center;flex-direction:row;margin-right:10px;justify-content:space-around}.codetitle{font-family:Rubik,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;color:#202020;font-size:22px;line-height:30.8px}.article{background:#fff;padding:5px;cursor:pointer;transition:.3s ease;width:140px;height:160px}.article:active{box-shadow:none;transform-origin:center;transform:scale(.98)}.article_category{display:inline-block;padding:5px 8px;border:#000;margin:0 0 10px;color:#fff;font-size:.75rem;font-weight:600;letter-spacing:.075rem;text-transform:uppercase;width:100px;height:100px}.article_excerpt{color:#000;line-height:1.5rem;font-size:.875rem}.article_title{margin:0 0 10px;color:#e10098;font-family:Josefin Sans;font-size:1.25rem;line-height:1.75rem}@media only screen and (min-width:320px) and (max-width:650px){.container-bl1{flex-direction:column;width:100%}}.inner-content{flex:1 1;max-width:720px}@media screen and (max-width:740px){.inner-content{margin-right:0}}.inner-content>h1:first-child{margin-top:1em}.inner-content blockquote{padding:.5em 1em .5em .5em;margin:1em 0;background-color:rgba(204,122,111,.05);border-left:5px solid rgba(191,87,73,.1)}.inner-content blockquote h4{margin-top:0}.inner-content blockquote p{margin-bottom:0}.inner-content blockquote p:first-child{margin-top:0}.inner-content img{max-width:100%}.inner-content .prism{position:relative;box-shadow:inset 0 1px 0 rgba(0,0,0,.08),inset 0 -1px 0 rgba(0,0,0,.08),inset -1px 0 0 rgba(0,0,0,.08),inset 4px 0 0 rgba(0,0,0,.08);border-radius:3px}.inner-content .prism .line-highlight{background-color:#f8e9f3;left:0;line-height:inherit;margin-top:5px;pointer-events:none;position:absolute;right:0;z-index:-1}@media print{.inner-content .prism{text-shadow:none}}.inner-content .prism+.prism{margin-top:-15px}.inner-content .not(code)>pre.prism{text-shadow:0 1px #fff}.inner-content .not(code)>pre.prism::-moz-selection,.inner-content .not(code)>pre.prism::selection{text-shadow:none}.inner-content pre.prism{padding:7px 14px;margin:1em -4px;overflow:auto}.read-next{display:inline-block;margin:4em -1em 0;border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.1);padding:.7em 1.5em .5em 1em}@media screen and (max-width:1119px){.read-next{margin-left:0}}.read-next:active,.read-next:focus,.read-next:hover{background:#e10098;text-decoration:none}.read-next:active .read-next-continue,.read-next:active .read-next-title,.read-next:focus .read-next-continue,.read-next:focus .read-next-title,.read-next:hover .read-next-continue,.read-next:hover .read-next-title{color:#fff}.read-next .read-next-continue{color:#e10098;font-size:13px;line-height:20.8px}.read-next .read-next-continue,.read-next .read-next-title{font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;display:block}.read-next .read-next-title{color:#202020;font-size:26px;line-height:41.6px}.nav-docs{font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:13px;line-height:20.8px;margin:1em 0 4em;width:195px;padding-left:20px}@media screen and (max-width:740px){.nav-docs{width:auto;padding-left:0}}.nav-docs h3{font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:13px;line-height:20.8px;text-transform:uppercase;margin:3em 0 1.5em}.nav-docs ul{list-style:none;margin:0}.nav-docs ul li{margin:0;line-height:32px}.nav-docs ul li ul{margin-bottom:18px}.nav-docs ul li ul li{line-height:21px}.nav-docs a{color:#666;display:block}.nav-docs a.active,.nav-docs a:focus,.nav-docs a:hover{text-decoration:none;color:#e10098}section.whos-using-page{padding-bottom:6em;text-align:center;max-width:900px}section.whos-using-page .prose{max-width:560px;text-align:center;margin:0 auto}section.whos-using-page .logos{align-items:center;display:flex;flex-flow:row wrap;justify-content:center}section.whos-using-page .logos img{max-height:100px;max-width:180px;padding:14px}@media screen and (min-width:1020px){section.whos-using-page .logos img{max-height:150px;max-width:270px;padding:20px}}section.whos-using-page .logos img.round{max-height:106px;max-width:140px;padding:11px}@media screen and (min-width:1020px){section.whos-using-page .logos img.round{max-height:158px;max-width:210px;padding:16px}}.prism{font-family:Roboto Mono,Menlo,Monaco,monospace;font-weight:400;color:#202020;font-size:13px;line-height:17px;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;position:relative}.cm-comment,.prism .comment{color:#999}.cm-punctuation,.prism .punctuation{color:#555}.cm-keyword,.prism .keyword{color:#b11a04}.cm-def,.prism .constant{color:#d2054e}.cm-property,.prism .attr-name{color:#1f61a0}.cm-number,.prism .number{color:#2882f9}.cm-string,.prism .string{color:#d64292}.cm-builtin,.prism .boolean{color:#d47509}.cm-string-2,.prism .enum{color:#0b7fc7}.cm-variable,.prism .variable{color:#397d13}.cm-meta,.prism .function{color:#b33086}.cm-atom,.prism .type-name{color:#ca9800}.CodeMirror{height:300px}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-animate-fat-cursor{width:auto;border:0;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-ruler{border-left:1px solid #ccc;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-invalidchar,.cm-s-default .cm-error{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0f0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#f22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none}.CodeMirror-scroll{overflow:hidden}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;margin-bottom:-30px;*zoom:1;*display:inline}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper{-webkit-user-select:none;-ms-user-select:none;user-select:none}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;overflow:auto}.CodeMirror-code{outline:none}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.CodeMirror-focused div.CodeMirror-cursors,div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background:#ffa;background:rgba(255,255,0,.4)}.CodeMirror span{*vertical-align:text-bottom}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:""}span.CodeMirror-selectedtext{background:none}.CodeMirror-foldmarker{color:#00f;text-shadow:#b9f 1px 1px 2px,#b9f -1px -1px 2px,#b9f 1px -1px 2px,#b9f -1px 1px 2px;line-height:.3;cursor:pointer}.CodeMirror-foldgutter{width:.7em}.CodeMirror-foldgutter-folded,.CodeMirror-foldgutter-open{cursor:pointer}.CodeMirror-foldgutter-open:after{content:"\25BE"}.CodeMirror-foldgutter-folded:after{content:"\25B8"}.CodeMirror-foldmarker{border-radius:4px;background:#08f;background:linear-gradient(#43a8ff,#0f83e8);color:#fff;box-shadow:0 1px 1px rgba(0,0,0,.2),inset 0 0 0 1px rgba(0,0,0,.1);font-family:arial;line-height:0;padding:0 4px 1px;font-size:12px;margin:0 3px;text-shadow:0 -1px rgba(0,0,0,.1)}.CodeMirror-lint-markers{width:16px}.CodeMirror-lint-tooltip{background-color:infobackground;border:1px solid #000;border-radius:4px 4px 4px 4px;font-family:Roboto Mono,Menlo,Monaco,monospace;font-weight:400;color:#202020;font-size:13px;line-height:17px;overflow:hidden;padding:2px 5px;position:fixed;white-space:pre;white-space:pre-wrap;z-index:100;max-width:600px;opacity:0;transition:opacity .4s;-moz-transition:opacity .4s;-webkit-transition:opacity .4s;-o-transition:opacity .4s;-ms-transition:opacity .4s}.CodeMirror-lint-mark-error,.CodeMirror-lint-mark-warning{background-position:0 100%;background-repeat:repeat-x}.CodeMirror-lint-mark-error{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==")}.CodeMirror-lint-mark-warning{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=")}.CodeMirror-lint-marker-error,.CodeMirror-lint-marker-warning{background-position:50%;background-repeat:no-repeat;cursor:pointer;display:inline-block;height:16px;width:16px;vertical-align:middle;position:relative}.CodeMirror-lint-message-error,.CodeMirror-lint-message-warning{padding-left:18px;background-position:0 0;background-repeat:no-repeat}.CodeMirror-lint-marker-error,.CodeMirror-lint-message-error{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=")}.CodeMirror-lint-marker-warning,.CodeMirror-lint-message-warning{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=")}.CodeMirror-lint-marker-multiple{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC");background-repeat:no-repeat;background-position:100% 100%;width:100%;height:100%}.CodeMirror-hints{font-family:Roboto Mono,Menlo,Monaco,monospace;font-weight:400;color:#202020;font-size:13px;line-height:17px;list-style:none;margin:0 0 0 -6px;max-height:14.5em;overflow-y:auto;overflow:hidden;padding:0}.CodeMirror-hints,.CodeMirror-hints-wrapper{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.45);position:absolute;z-index:10}.CodeMirror-hints-wrapper{margin-left:-6px}.CodeMirror-hints-wrapper .CodeMirror-hints{box-shadow:none;position:relative;margin-left:0;z-index:0}.CodeMirror-hint{border-top:1px solid #f7f7f7;color:#333;cursor:pointer;margin:0;max-width:300px;overflow:hidden;padding:2px 6px;white-space:pre}li.CodeMirror-hint-active{background-color:#08f;border-top-color:#fff;color:#fff}.CodeMirror-hint-information{border-top:1px solid silver;max-width:300px;padding:4px 6px;position:relative;z-index:1}.CodeMirror-hint-information:first-child{border-bottom:1px solid silver;border-top:none;margin-bottom:-1px}.CodeMirror-hint-information .content{-webkit-box-orient:vertical;display:-webkit-box;font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:15px;line-height:24px;-webkit-line-clamp:3;max-height:48px;overflow:hidden;text-overflow:-o-ellipsis-lastline}.CodeMirror-hint-information .content p:first-child{margin-top:0}.CodeMirror-hint-information .content p:last-child{margin-bottom:0}.CodeMirror-hint-information .infoType{color:#30a;margin-right:.5em;display:inline}div.CodeMirror-lint-tooltip{background-color:#fff;color:#333;border:0;border-radius:2px;box-shadow:0 1px 3px rgba(0,0,0,.45);font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:15px;line-height:24px;padding:6px 10px;opacity:0;transition:opacity .15s;-moz-transition:opacity .15s;-webkit-transition:opacity .15s;-o-transition:opacity .15s;-ms-transition:opacity .15s}div.CodeMirror-lint-message-error,div.CodeMirror-lint-message-warning{padding-left:23px}div.CodeMirror span.CodeMirror-matchingbracket{color:#555;text-decoration:underline}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:red}.cm-comment{color:#999}.cm-punctuation{color:#555}.cm-keyword{color:#b11a04}.cm-def{color:#d2054e}.cm-property{color:#1f61a0}.cm-qualifier{color:#1c92a9}.cm-attribute{color:#8b2bb9}.cm-number{color:#2882f9}.cm-string{color:#d64292}.cm-builtin{color:#d47509}.cm-string-2{color:#0b7fc7}.cm-variable{color:#397d13}.cm-meta{color:#b33086}.cm-atom{color:#ca9800}.CodeMirror{font-family:Roboto Mono,Menlo,Monaco,monospace;font-weight:400;color:#202020;font-size:13px;line-height:17px}.miniGraphiQL{color:#333;width:100%;display:flex;flex-direction:row;position:relative;background:#fff;box-shadow:inset 0 0 0 1px #eee,inset 4px 0 0 #eee;border-radius:3px;margin:28px 0 28px -4px}.query-editor .CodeMirror{height:auto;min-height:100px;margin:0 7px 35px;background:none}.hasVariables,.query-editor{width:50%}.hasVariables .query-editor{width:auto}.hasVariables .query-editor .CodeMirror{margin-bottom:21px}.hasVariables .variable-editor .CodeMirror{height:auto;min-height:30px;margin:0 7px;background:none}.hasVariables .variable-editor:before{background:#eee;color:#fff;content:"VARIABLES";display:block;font-size:10px;font-weight:700;letter-spacing:1px;line-height:1;padding:3px 12px 2px;text-shadow:0 -1px #ddd}.result-window{box-shadow:inset 5px 0 4px -3px rgba(0,0,0,.2);position:absolute;left:50%;top:0;bottom:0;height:100%;right:0;box-shadow:inset 0 0 0 1px #eee;border-radius:3px}.result-window .CodeMirror{background:none;height:100%;margin:0 7px;box-sizing:border-box}.algolia-search-wrapper{float:right;display:inline-block;vertical-align:top;pointer-events:auto}@media screen and (max-width:1020px){.algolia-search-wrapper{display:none}}.algolia-search-wrapper input{font-family:quote,Rubik,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#9e9e9e;font-size:15px;line-height:21px;background:transparent url(/img/search.svg) no-repeat 10px;background-color:hsla(0,0%,100%,.1);background-size:16px 16px;border-radius:15px;border:1px solid rgba(23,30,38,.2);height:30px;margin-top:10px;outline:none;padding:0 10px 0 35px;width:180px;transition:width .2s ease-out}.algolia-search-wrapper input:focus{width:250px}.algolia-search-wrapper .algolia-autocomplete{vertical-align:top;height:53px}.algolia-search-wrapper .aa-dropdown-menu{font-family:quote,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#202020;font-size:15px;line-height:24px;margin-top:-10px;width:600px;margin-left:-300px;padding:0;border:none;border-radius:4px;box-shadow:0 0 1px rgba(0,0,0,.2),0 2px 8px rgba(0,0,0,.2)}.algolia-search-wrapper .aa-dropdown-menu .aa-suggestion{border-top:1px solid #f3f3f3}.algolia-search-wrapper .aa-dropdown-menu .aa-suggestion:first-child{border:none;border-radius:4px 4px 0 0}.algolia-search-wrapper .aa-dropdown-menu .aa-suggestion:first-child .algolia-docsearch-suggestion--subcategory-column{border-top-left-radius:4px}.algolia-search-wrapper .aa-dropdown-menu .aa-suggestion:last-child{border-radius:0 0 4px 4px}.algolia-search-wrapper .aa-dropdown-menu .aa-suggestion:last-child .algolia-docsearch-suggestion--subcategory-column{border-bottom-left-radius:4px}.algolia-search-wrapper .aa-dropdown-menu .algolia-docsearch-suggestion--category-header{display:none}.algolia-search-wrapper .aa-dropdown-menu .algolia-docsearch-footer{padding:2px 12px;border-top-color:#ededed;opacity:.75}.algolia-search-wrapper .aa-dropdown-menu .algolia-docsearch-suggestion--highlight{background-color:#e10098;color:#fff}.algolia-search-wrapper .aa-dropdown-menu .aa-cursor .algolia-docsearch-suggestion{background:#fcf9fb}.algolia-search-wrapper .aa-dropdown-menu .aa-cursor .algolia-docsearch-suggestion--content{color:#e10098}.algolia-search-wrapper .aa-dropdown-menu .algolia-docsearch-suggestion,.algolia-search-wrapper .aa-dropdown-menu .algolia-docsearch-suggestion--content{border:none}.algolia-search-wrapper .aa-dropdown-menu .algolia-docsearch-suggestion--subcategory-column{font-family:quote,Rubik,Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Source Han Sans CN,Source Han Sans SC,Microsoft YaHei,sans-serif;font-weight:300;color:#869cb6;font-size:13px;line-height:18.2px;border:none;padding-top:9px}.code .code-hero{background-color:#171e26;position:relative;min-height:250px;margin-top:-5vh;padding:5px 0 0;width:100%}@media screen and (max-width:600px){.code .code-hero{height:20vh}}@media screen and (min-width:992px){.code .code-hero{height:35vh}}@media screen and (min-width:1020px){.code .code-hero{max-height:750px;height:40vh;min-height:400px;padding-top:50px}}.code .code-hero h1{color:#e10098;font-weight:800;font-size:100px;line-height:.5;margin-top:100px}@media screen and (min-width:1020px){.code .code-hero h1{font-size:140px}}.code .code-hero p{font-size:32px;color:#fff}@media screen and (min-width:1020px){.code .code-hero p{font-size:48px}}.code .code-hero .code-hero-inner{position:absolute;text-align:center;width:100%}.code .code-hero:before{background:url(/img/graph-wash.png) repeat 50%;content:"";display:block;height:100%;position:absolute;width:100%;top:0;left:0}.code .intro-note{margin-top:20px}.code .inner-content{max-width:100%}</style><meta name="generator" content="Gatsby 2.25.0"/><title data-react-helmet="true">Blog | GraphQL</title><meta data-react-helmet="true" name="viewport" content="width=640"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/rubik/v12/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-WYiFV0U1.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/robotomono/v13/L0xoDF4xlVMF-BfR8bXMIjhOsXG-q2oeuFoqFrlnANW6Cpk.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBBc4.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW4.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_AP2_ROW4.woff2"/><style>@font-face{font-family:Rubik;font-style:normal;font-weight:300;src:url(/static/webfonts/s/rubik/v12/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-WYiFV0U1.woff2) format("woff2");font-display:swap}@font-face{font-family:Rubik;font-style:normal;font-weight:300;src:url(/static/webfonts/s/rubik/v12/iJWZBXyIfDnIV5PNhY1KTN7Z-Yh-WYiFV0Uz.woff) format("woff");font-display:swap}@font-face{font-family:Roboto Mono;font-style:italic;font-weight:400;src:url(/static/webfonts/s/robotomono/v13/L0xoDF4xlVMF-BfR8bXMIjhOsXG-q2oeuFoqFrlnANW6Cpk.woff2) format("woff2");font-family:Roboto;font-style:normal;font-weight:300;src:url(/static/webfonts/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBBc4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto Mono;font-style:normal;font-weight:400;src:url(/static/webfonts/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto Mono;font-style:normal;font-weight:600;src:url(/static/webfonts/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_AP2_ROW4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto Mono;font-style:italic;font-weight:400;src:url(/static/webfonts/s/robotomono/v13/L0xoDF4xlVMF-BfR8bXMIjhOsXG-q2oeuFoqFrlnANW6Cp8.woff) format("woff");font-display:swap}@font-face{font-family:Roboto Mono;font-style:normal;font-weight:400;src:url(/static/webfonts/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-.woff) format("woff");font-display:swap}@font-face{font-family:Roboto Mono;font-style:normal;font-weight:600;src:url(/static/webfonts/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_AP2_ROW-.woff) format("woff");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:300;src:url(/static/webfonts/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBBc-.woff) format("woff");font-display:swap}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="Blog | GraphQL" href="/blog/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-5f078ac1e265d8de4fe5.js"/><link as="script" rel="preload" href="/framework-1bcdbcdd30f43763a25c.js"/><link as="script" rel="preload" href="/app-b8e5291ffc8a07998bdc.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/f65a48b9-fb6134736a4f5f393795.js"/><link as="script" rel="preload" href="/commons-82126b8c29a48840ab48.js"/><link as="script" rel="preload" href="/031ea306f037722fb1dd352c81fe440e5bcacbbc-16e6aa699a430d5d6825.js"/><link as="script" rel="preload" href="/427401584d862020e248f9ac9601f576799623ba-ceb172f88d4d2a2376f4.js"/><link as="script" rel="preload" href="/component---src-pages-blog-tsx-e0e30c95c9ad200b8d55.js"/><link as="fetch" rel="preload" href="/page-data/blog/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1581580458.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header><section><a class="nav-home" href="/"><img class="nav-logo" src="/img/logo.svg" alt="GraphQL Logo" width="30" height="30"/>GraphQL</a><nav><a href="/learn/">学习</a><a href="/code/">代码</a><a href="/community/">社区</a><a href="https://spec.graphql.cn/" target="_blank" rel="noopener noreferrer">规范</a><a href="/codeofconduct/">行为守则</a><a href="https://foundation.graphql.org/" target="_blank" rel="noopener noreferrer">基金会</a><a href="https://l.graphql.org/" target="_blank" rel="noopener noreferrer">社区总览</a><a href="https://principles.graphql.cn/" target="_blank" rel="noopener noreferrer">开发原则</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="搜索文档..." aria-label="搜索文档"/></div></section></header><section><div class="documentationContent"><div><div class="inner-content"><h1><a href="/blog/production-ready/">Leaving technical preview</a></h1><p>9/14/2016<!-- --> by <!-- -->Lee Byron</p><hr/><div><p>After over a year of being open sourced we&#x27;re bringing GraphQL out of &quot;technical preview&quot; and relaunching <a href="http://graphql.org/" target="_blank" rel="nofollow noopener noreferrer">graphql.org</a>.</p><p>For us at Facebook, GraphQL isn&#x27;t a new technology. GraphQL has been delivering data to mobile News Feed since 2012. Since then it&#x27;s expanded to support the majority of the Facebook mobile product and evolved in the process.</p><p>Early last year when we first <a href="https://www.youtube.com/watch?v=9sc8Pyc51uU" target="_blank" rel="nofollow noopener noreferrer">spoke publicly about GraphQL</a> we received overwhelming demand to share more about this technology. That sparked an internal project to revisit GraphQL, make improvements, draft a specification, produce a reference implementation you could use to try it out, and build new versions of some of our favorite tools, like <a href="https://github.com/graphql/graphiql" target="_blank" rel="nofollow noopener noreferrer">GraphiQL</a>. We moved quickly, and released parts that were ready along the way.</p><p>Part of Facebook&#x27;s open source philosophy is that we want to only open source what is ready for production. While it&#x27;s true that we had been using GraphQL in production at Facebook for years, we knew that these newly released pieces had yet to be proven. We expected feedback. So we carefully released GraphQL as a &quot;technical preview.&quot;</p><p>Exactly one year ago, we published graphql.org, with a <a href="/blog/graphql-a-query-language/">formal announcement</a> that GraphQL was open source and ready to be &quot;technically previewed&quot;. Since then we&#x27;ve seen GraphQL implemented <a href="/code/">in many languages</a>, and successfully adopted by other companies. That includes today&#x27;s exciting announcement of the <a href="http://githubengineering.com/the-github-graphql-api/" target="_blank" rel="nofollow noopener noreferrer">GitHub GraphQL API</a>, the first major public API to use GraphQL.</p><p>In recognition of the fact that GraphQL is now being used in production by many companies, we&#x27;re excited to remove the &quot;technical preview&quot; moniker. GraphQL is production ready.</p><p>We&#x27;ve also revamped this website, <a href="http://graphql.org/" target="_blank" rel="nofollow noopener noreferrer">graphql.org</a>, with clearer and more relevant content in response to some the most common questions we&#x27;ve received over the last year.</p><p>We think GraphQL can greatly simplify data needs for both client product developers and server-side engineers, regardless of what languages you&#x27;re using in either environment, and we&#x27;re excited to continue to improve GraphQL, support the already growing community, and see what we can build together.</p></div></div><div class="inner-content"><h1><a href="/blog/rest-api-graphql-wrapper/">Wrapping a REST API in GraphQL</a></h1><p>5/5/2016<!-- --> by <!-- -->Steven Luscher</p><hr/><div><p>Time and time again I hear the same aspiration from front-end web and mobile developers: they&#x27;re eager to reap the developer efficiency gains offered by new technologies like Relay and GraphQL, but they have years of momentum behind their existing REST API. Without data that clearly demonstrates the benefits of switching, they find it hard to justify an additional investment in GraphQL infrastructure.</p><p>In this post I will outline a rapid, low-investment method that you can use to stand up a GraphQL endpoint atop an existing REST API, using JavaScript alone. No backend developers will be harmed during the making of this blog post.</p><h2><a class="anchor" id="a-client-side-rest-wrapper" name="a-client-side-rest-wrapper"></a>A client-side REST wrapper<a class="hash-link" href="#a-client-side-rest-wrapper">#</a></h2><p>We&#x27;re going to create a <em>GraphQL schema</em> – a type system that describes your universe of data – that wraps calls to your existing REST API. This schema will receive and resolve GraphQL queries all on the client side. This architecture features some inherent performance flaws, but is fast to implement and requires no server changes.</p><p>Imagine a REST API that exposes a <code>/people/</code> endpoint through which you can browse <code>Person</code> models and their associated friends.</p><p><img src="/img/blog/20160502-rest-api-graphql-wrapper/rest-api-people.png" alt="A REST API that exposes an index of people" title="A REST API that exposes an index of people"/></p><p>We will build a GraphQL schema that models people and their attributes (like <code>first_name</code> and <code>email</code>) as well as their association to other people through friendships.</p><h3><a class="anchor" id="installation" name="installation"></a>Installation<a class="hash-link" href="#installation">#</a></h3><p>First we&#x27;ll need a set of schema building tools.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain">npm install </span><span class="token operator">--</span><span class="token plain">save graphql</span></div></pre><h3><a class="anchor" id="building-the-graphql-schema" name="building-the-graphql-schema"></a>Building the GraphQL Schema<a class="hash-link" href="#building-the-graphql-schema">#</a></h3><p>Ultimately we will want to export a <code>GraphQLSchema</code> that we can use to resolve queries.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> GraphQLSchema </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLSchema</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  query</span><span class="token punctuation">:</span><span class="token plain"> QueryType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p>At the root of all GraphQL schemas is a type called <code>query</code> whose definition we provide, and have specified here as <code>QueryType</code>. Let&#x27;s build <code>QueryType</code> now – a type on which we will define all the possible things one might want to fetch.</p><p>To replicate all of the functionality of our REST API, let&#x27;s expose two fields on <code>QueryType</code>:</p><ul><li>an <code>allPeople</code> field – analogous to <code>/people/</code></li><li>a <code>person(id: String)</code> field – analogous to <code>/people/{ID}/</code></li></ul><p>Each field will consist of a return type, optional argument definitions, and a JavaScript method that resolves the data being queried for.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLList</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLObjectType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> QueryType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Query&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;The root of all... queries&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    allPeople</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLList</span><span class="token punctuation">(</span><span class="token plain">PersonType</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> root </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token comment">// Fetch the index of people from the REST API,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    person</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> PersonType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      args</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">root</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token comment">// Fetch the person with ID `args.id`,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p>Let&#x27;s leave the resolvers as a sketch for now, and move on to defining <code>PersonType</code>.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLList</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLObjectType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> PersonType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Somebody that you used to know&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    firstName</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> person</span><span class="token punctuation">.</span><span class="token plain">first_name</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    lastName</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> person</span><span class="token punctuation">.</span><span class="token plain">last_name</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    email</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    username</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    friends</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLList</span><span class="token punctuation">(</span><span class="token plain">PersonType</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token comment">// Fetch the friends with the URLs `person.friends`,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p>Note two things about the definition of <code>PersonType</code>. Firstly, we have not supplied a resolver for <code>email</code>, <code>id</code>, or <code>username</code>. The default resolver simply accesses the property of the <code>person</code> object that has the same name as the field. This works everywhere except where the property names do not match the field name (eg. the field <code>firstName</code> does not match the <code>first_name</code> property of the response object from the REST API) or where accessing the property would not yield the object that we want (eg. we want a list of person objects for the <code>friends</code> field, not a list of URLs).</p><p>Now, let&#x27;s write resolvers that fetch people from the REST API. Because we need to load from the network, we won&#x27;t be able to return a value right away. Luckily for us, <code>resolve()</code> can return either a value or a <code>Promise</code> for a value. We&#x27;re going to take advantage of this to fire off an HTTP request to the REST API that eventually resolves to a JavaScript object that conforms to <code>PersonType</code>.</p><p>And here we have it – a complete first-pass at the schema:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLList</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLObjectType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLSchema</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> BASE_URL </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;https://myapp.com/&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">relativeURL</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">`</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">res </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> res</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token string">&#x27;/people/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">json </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">people</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchPersonByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">json </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">person</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> PersonType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">/* ... */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">/* ... */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    friends</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLList</span><span class="token punctuation">(</span><span class="token plain">PersonType</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> person</span><span class="token punctuation">.</span><span class="token plain">friends</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token plain">fetchPersonByURL</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> QueryType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">/* ... */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    allPeople</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLList</span><span class="token punctuation">(</span><span class="token plain">PersonType</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> fetchPeople</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    person</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> PersonType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      args</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">root</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function">fetchPersonByURL</span><span class="token punctuation">(</span><span class="token template-string string">`/people/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">args</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/`</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLSchema</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  query</span><span class="token punctuation">:</span><span class="token plain"> QueryType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><h3><a class="anchor" id="using-a-client-side-schema-with-relay" name="using-a-client-side-schema-with-relay"></a>Using a client-side schema with Relay<a class="hash-link" href="#using-a-client-side-schema-with-relay">#</a></h3><p>Normally, Relay will send its GraphQL queries to a server over HTTP. We can inject <a href="https://github.com/taion/" target="_blank" rel="nofollow noopener noreferrer">@taion</a>&#x27;s custom <code>relay-local-schema</code> network layer to resolve queries using the schema we just built. Put this code wherever it&#x27;s guaranteed to be executed before you mount your Relay app.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain">npm install </span><span class="token operator">--</span><span class="token plain">save relay</span><span class="token operator">-</span><span class="token plain">local</span><span class="token operator">-</span><span class="token plain">schema</span></div></pre><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> RelayLocalSchema </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;relay-local-schema&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> schema </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;./schema&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain">Relay</span><span class="token punctuation">.</span><span class="token function">injectNetworkLayer</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">RelayLocalSchema</span><span class="token class-name punctuation">.</span><span class="token class-name">NetworkLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> schema </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p>And that&#x27;s that. Relay will send all of its queries to your custom client-resident schema, which will in turn resolve them by making calls to your existing REST API.</p><h2><a class="anchor" id="a-server-side-rest-wrapper" name="a-server-side-rest-wrapper"></a>A server-side REST wrapper<a class="hash-link" href="#a-server-side-rest-wrapper">#</a></h2><p>The client-side REST API wrapper demonstrated above should help you get up and running quickly so that you can try out a Relay version of your app (or part of your app).</p><p>However, as we mentioned before, this architecture features some inherent performance flaws because of how GraphQL is still calling your underlying REST API which can be very network intensive. A good next step is to move the schema from the client side to the server side to minimize latency on the network and to give you more power to cache responses.</p><p>Take the next 10 minutes to watch me build a server side version of the GraphQL wrapper above using Node and Express.</p><div><iframe id="ytplayer" type="text/html" width="640" height="390"
  src="https://www.youtube.com/embed/UBGzsb2UkeY?autoplay=0&origin=http://graphql.org&start=900"
  frameborder="0"></iframe>

</div><h2><a class="anchor" id="bonus-round-a-truly-relay-compliant-schema" name="bonus-round-a-truly-relay-compliant-schema"></a>Bonus round: A truly Relay compliant schema<a class="hash-link" href="#bonus-round-a-truly-relay-compliant-schema">#</a></h2><p>The schema we developed above will work for Relay up until a certain point – the point at which you ask Relay to refetch data for records you&#x27;ve already downloaded. Relay&#x27;s refetching subsystem relies on your GraphQL schema exposing a special field that can fetch any entity in your data universe by GUID. We call this the <em>node interface</em>.</p><p>To expose a node interface requires that you do two things: offer a <code>node(id: String!)</code> field at the root of the query, and switch all of your ids over to GUIDs (globally-unique ids).</p><p>The <code>graphql-relay</code> package contains some helper functions to make this easy to do.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain">npm install </span><span class="token operator">--</span><span class="token plain">save graphql</span><span class="token operator">-</span><span class="token plain">relay</span></div></pre><h4><a class="anchor" id="global-ids" name="global-ids"></a>Global ids<a class="hash-link" href="#global-ids">#</a></h4><p>First, let&#x27;s change the <code>id</code> field of <code>PersonType</code> into a GUID. To do this, we&#x27;ll use the <code>globalIdField</code> helper from <code>graphql-relay</code>.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  globalIdField</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql-relay&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> PersonType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Somebody that you used to know&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">globalIdField</span><span class="token punctuation">(</span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">/* ... */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p>Behind the scenes <code>globalIdField</code> returns a field definition that resolves <code>id</code> to a <code>GraphQLString</code> by hashing together the typename <code>&#x27;Person&#x27;</code> and the id returned by the REST API. We can later use <code>fromGlobalId</code> to convert the result of this field back into <code>&#x27;Person&#x27;</code> and the REST API&#x27;s id.</p><h4><a class="anchor" id="the-node-field" name="the-node-field"></a>The node field<a class="hash-link" href="#the-node-field">#</a></h4><p>Another set of helpers from <code>graphql-relay</code> will give us a hand developing the node field. Your job is to supply the helper two functions:</p><ul><li>One function that can resolve an object given a GUID.</li><li>One function that can resolve a typename given an object.</li></ul><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fromGlobalId</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  nodeDefinitions</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql-relay&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> nodeInterface</span><span class="token punctuation">,</span><span class="token plain"> nodeField </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">nodeDefinitions</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  globalId </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> type</span><span class="token punctuation">,</span><span class="token plain"> id </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">fromGlobalId</span><span class="token punctuation">(</span><span class="token plain">globalId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">type </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetchPersonByURL</span><span class="token punctuation">(</span><span class="token template-string string">`/people/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  object </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">object</span><span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p>The object-to-typename resolver above is no marvel of engineering, but you get the idea.</p><p>Next, we simply need to add the <code>nodeInterface</code> and the <code>nodeField</code> to our schema. A complete example follows:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLList</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLObjectType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLSchema</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fromGlobalId</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  globalIdField</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  nodeDefinitions</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql-relay&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> BASE_URL </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;https://myapp.com/&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">relativeURL</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">`</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">res </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> res</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token string">&#x27;/people/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">json </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">people</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchPersonByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">json </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">person</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> nodeInterface</span><span class="token punctuation">,</span><span class="token plain"> nodeField </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">nodeDefinitions</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  globalId </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> type</span><span class="token punctuation">,</span><span class="token plain"> id </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">fromGlobalId</span><span class="token punctuation">(</span><span class="token plain">globalId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">type </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetchPersonByURL</span><span class="token punctuation">(</span><span class="token template-string string">`/people/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  object </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">object</span><span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> PersonType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Somebody that you used to know&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    firstName</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> person</span><span class="token punctuation">.</span><span class="token plain">first_name</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    lastName</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> person</span><span class="token punctuation">.</span><span class="token plain">last_name</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    email</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">globalIdField</span><span class="token punctuation">(</span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    username</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    friends</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLList</span><span class="token punctuation">(</span><span class="token plain">PersonType</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> person</span><span class="token punctuation">.</span><span class="token plain">friends</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token plain">fetchPersonByURL</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  interfaces</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> nodeInterface </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> QueryType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Query&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;The root of all... queries&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    allPeople</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLList</span><span class="token punctuation">(</span><span class="token plain">PersonType</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> fetchPeople</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    node</span><span class="token punctuation">:</span><span class="token plain"> nodeField</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    person</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> PersonType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      args</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">root</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function">fetchPersonByURL</span><span class="token punctuation">(</span><span class="token template-string string">`/people/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">args</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/`</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLSchema</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  query</span><span class="token punctuation">:</span><span class="token plain"> QueryType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><h2><a class="anchor" id="taming-pathological-queries" name="taming-pathological-queries"></a>Taming pathological queries<a class="hash-link" href="#taming-pathological-queries">#</a></h2><p>Consider the following friends-of-friends-of-friends query:</p><pre class="prism prism-code language-graphql"><div class="token-line"><span class="token keyword">query</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  person</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    firstName</span></div><div class="token-line"><span class="token plain">    friends </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      firstName</span></div><div class="token-line"><span class="token plain">      friends </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        firstName</span></div><div class="token-line"><span class="token plain">        friends </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          firstName</span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><p>The schema we created above will generate multiple round trips to the REST API for the same data.</p><p><img src="/img/blog/20160502-rest-api-graphql-wrapper/pathological-query.png" alt="Duplicate queries to the REST API" title="Duplicate queries to the REST API"/></p><p>This is obviously something we would like to avoid<!-- -->! At the very least, we need a way to cache the result of these requests.</p><p>We created a library called DataLoader to help tame these sorts of queries.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain">npm install </span><span class="token operator">--</span><span class="token plain">save dataloader</span></div></pre><p>As a special note, make sure that your runtime offers native or polyfilled versions of <code>Promise</code> and <code>Map</code>. Read more <a href="https://github.com/facebook/dataloader#getting-started" target="_blank" rel="nofollow noopener noreferrer">at the DataLoader site</a>.</p><h4><a class="anchor" id="creating-a-data-loader" name="creating-a-data-loader"></a>Creating a data loader<a class="hash-link" href="#creating-a-data-loader">#</a></h4><p>To create a <code>DataLoader</code> you supply a method that can resolve a list of objects given a list of keys. In our example, the keys are URLs at which we access our REST API.</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">const</span><span class="token plain"> personLoader </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">DataLoader</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  urls </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token plain">urls</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token plain">fetchPersonByURL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p>If this data loader sees a key more than once in its lifetime, it will return a memoized (cached) version of the response.</p><h4><a class="anchor" id="loading-data" name="loading-data"></a>Loading data<a class="hash-link" href="#loading-data">#</a></h4><p>We can make use of the <code>load()</code> and <code>loadMany()</code> methods on <code>personLoader</code> to load URLs without fear of hitting the REST API more than once per URL. A complete example follows:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token keyword">import</span><span class="token plain"> DataLoader </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;dataloader&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLList</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLObjectType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLSchema</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fromGlobalId</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  globalIdField</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  nodeDefinitions</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql-relay&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> BASE_URL </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;https://myapp.com/&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">relativeURL</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">`</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">res </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> res</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token string">&#x27;/people/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">json </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">people</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetchPersonByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">fetchResponseByURL</span><span class="token punctuation">(</span><span class="token plain">relativeURL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token plain">json </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">person</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> personLoader </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">DataLoader</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  urls </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token plain">urls</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token plain">fetchPersonByURL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> nodeInterface</span><span class="token punctuation">,</span><span class="token plain"> nodeField </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">nodeDefinitions</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  globalId </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">type</span><span class="token punctuation">,</span><span class="token plain"> id</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">fromGlobalId</span><span class="token punctuation">(</span><span class="token plain">globalId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">type </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> personLoader</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token template-string string">`/people/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  object </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">object</span><span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> PersonType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Somebody that you used to know&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    firstName</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> person</span><span class="token punctuation">.</span><span class="token plain">first_name</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    lastName</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> person</span><span class="token punctuation">.</span><span class="token plain">last_name</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    email</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">globalIdField</span><span class="token punctuation">(</span><span class="token string">&#x27;Person&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    username</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain">type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    friends</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLList</span><span class="token punctuation">(</span><span class="token plain">PersonType</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> person </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> personLoader</span><span class="token punctuation">.</span><span class="token function">loadMany</span><span class="token punctuation">(</span><span class="token plain">person</span><span class="token punctuation">.</span><span class="token plain">friends</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  interfaces</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">nodeInterface</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> QueryType </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Query&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;The root of all... queries&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fields</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    allPeople</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLList</span><span class="token punctuation">(</span><span class="token plain">PersonType</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> fetchPeople</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    node</span><span class="token punctuation">:</span><span class="token plain"> nodeField</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    person</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token punctuation">:</span><span class="token plain"> PersonType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      args</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        id</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> type</span><span class="token punctuation">:</span><span class="token plain"> GraphQLString </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      resolve</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">root</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> personLoader</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token template-string string">`/people/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">args</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/`</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GraphQLSchema</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  query</span><span class="token punctuation">:</span><span class="token plain"> QueryType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p>Now, our pathological query produces the following nicely de-duped set of requests to the REST API:</p><p><img src="/img/blog/20160502-rest-api-graphql-wrapper/dataloader-query.png" alt="De-duped queries to the REST API" title="De-duped queries to the REST API"/></p><h3><a class="anchor" id="query-planning-and-beyond" name="query-planning-and-beyond"></a>Query planning and beyond<a class="hash-link" href="#query-planning-and-beyond">#</a></h3><p>Consider that your REST API might already offer configuration offers that let you eagerly load associations. Maybe to load a person and all of their direct friends you might hit the URL <code>/people/1/?include_friends</code>. To take advantage of this in your GraphQL schema you will need the ability to develop a resolution plan based on the structure of the query itself (eg. whether the <code>friends</code> field is part of the query or not).</p><p>For those interested in the current thinking around advanced resolution strategies, keep an eye on <a href="https://github.com/graphql/graphql-js/pull/304" target="_blank" rel="nofollow noopener noreferrer">pull request #304</a>.</p><h2><a class="anchor" id="thanks-for-reading" name="thanks-for-reading"></a>Thanks for reading<a class="hash-link" href="#thanks-for-reading">#</a></h2><p>I hope that this demonstration has torn down some of the barriers between you and a functional GraphQL endpoint, and has inspired you to experiment with GraphQL and Relay on an existing project.</p></div></div><div class="inner-content"><h1><a href="/blog/mocking-with-graphql/">Mocking your server is easy with GraphQL</a></h1><p>4/19/2016<!-- --> by <!-- -->Jonas Helfer</p><p class="guestBio">This guest article contributed by Jonas Helfer, engineer at Meteor working on Apollo.</p><div><p>Do you think mocking your backend is always a tedious task? If you do, reading this post might change your mind…</p><p>Mocking is the practice of creating a fake version of a component, so that you can develop and test other parts of your application independently. Mocking your backend is a great way to quickly build a prototype of your frontend, and it lets you test your frontend without starting up any servers. API mocking is so useful that a <a href="https://www.google.com/?ion=1&amp;espv=2#q=mock+rest+api" target="_blank" rel="nofollow noopener noreferrer">quick Google search</a> will turn up dozens of expensive products and services that promise to help you.</p><p>Sadly, I think none of the solutions out there make it as easy as it should be. As it turns out, that’s because they’ve been trying to do it with the wrong technology<!-- -->!</p><blockquote><p>Editor’s note : The concepts in this post are accurate, but some the code samples don’t demonstrate new usage patterns. After reading, consult the <a href="http://dev.apollodata.com/tools/graphql-tools/mocking.html" target="_blank" rel="nofollow noopener noreferrer">graphql-tools docs</a> to see how to use mocking today.</p></blockquote><h2><a class="anchor" id="why-mock" name="why-mock"></a>Why mock?<a class="hash-link" href="#why-mock">#</a></h2><p>Mocking the data a backend would return is very useful for two main reasons:</p><ol><li>It lets you start developing a frontend feature when you don’t have a working backend for it yet. This is critical for projects where the frontend and backend components are often developed in parallel.</li><li>It lets you run tests locally without connecting to a real backend, which is much faster and safer. As your codebase grows and your app becomes more complex, starting up all of the server infrastructure just to run some tests isn’t feasible.</li></ol><p>If mocking your backend API has such clear benefits, why doesn’t everyone do it? I think it&#x27;s because mocking often seems like too much trouble to be worth it.</p><h2><a class="anchor" id="why-is-mocking-backends-hard" name="why-is-mocking-backends-hard"></a>Why is mocking backends hard?<a class="hash-link" href="#why-is-mocking-backends-hard">#</a></h2><p>Let’s say your backend is some REST API that is called over HTTP from the browser. You have someone working on the backend, and someone else working on the frontend. The backend code actually determines the shape of the data returned for each REST endpoint, but mocking has to be done in the frontend code. That means the mocking code will break every time the backend changes, unless both are changed at the same time. What’s worse, if you’re doing your frontend testing against a mock backend that is not up to date with your backend, your tests may pass, but your actual frontend won’t work.</p><p>Rather than having to keep more dependencies up to date, the easy option is to just not mock the REST API, or have the backend be in charge of mocking itself, just so it’s all in one place. That may be easier, but it will also slow you down.</p><p>The other reason I often hear for why people don’t mock the backend in their project is because it takes time to set up: first you have to include extra logic in your data fetching layer that lets you turn mocking on and off, and second you have to actually describe what that mock data should look like. For any non-trivial API that requires a lot of tedious work.</p><p>Both of these reasons for why mocking backends is hard are actually due to the same underlying reason: there is no standard REST API description in machine-consumable format and contains all the information necessary for mocking and can be used by both the backend and the frontend. There are some API description standards, like Swagger, but they don’t contain all of the information you need, and can be cumbersome to write and maintain. Unless you want to pay for a service or a product — and maybe even then — mocking is a lot of work.</p><p>Actually, I should say mocking used to be a lot of work, because a new technology is changing the way we think of APIs: GraphQL.</p><h2><a class="anchor" id="mocking-is-easy-with-a-type-system" name="mocking-is-easy-with-a-type-system"></a>Mocking is easy with a type system<!-- -->!<a class="hash-link" href="#mocking-is-easy-with-a-type-system">#</a></h2><p>GraphQL makes mocking easy, because every GraphQL backend comes with a static type system. The types can be shared between your backend and your frontend, and they contain all of the information necessary to make mocking incredibly fast and convenient. With GraphQL, there is no excuse to not mock your backend for development or testing.</p><p>Here’s how easy it is to create a mocked backend that will accept any valid GraphQL query with the GraphQL mocking tool we are building as part of our new <a href="https://github.com/apollostack/graphql-tools" target="_blank" rel="nofollow noopener noreferrer">GraphQL server toolkit</a>:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token comment">// &gt; npm install graphql-tools</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> mockServer </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql-tools&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> schema </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;./mySchema.graphql&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> myMockServer </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">mockServer</span><span class="token punctuation">(</span><span class="token plain">schema</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">myMockServer</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string string">`{</span></div><div class="token-line"><span class="token template-string string">  allUsers: {</span></div><div class="token-line"><span class="token template-string string">    id</span></div><div class="token-line"><span class="token template-string string">    name</span></div><div class="token-line"><span class="token template-string string">  }</span></div><div class="token-line"><span class="token template-string string">}`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// returns</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// {</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">//   data: {</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">//     allUsers:[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">//       { id: &#x27;ee5ae76d-9b91-4270-a007-fad2054e2e75&#x27;, name: &#x27;lorem ipsum&#x27; },</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">//       { id: &#x27;ca5c182b-99a8-4391-b4b4-4a20bd7cb13a&#x27;, name: &#x27;quis ut&#x27; }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">//     ]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">//   }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// }</span></div></pre><p>Every GraphQL server needs a schema, so it’s not extra code you need to write just for mocking. And the query is the one your component already uses for fetching data, so that’s also not code you write just for mocking. Not counting the import statement, it only took us one line of code to mock the entire backend<!-- -->!</p><p>Put that in contrast to most REST APIs out there, where mocking means parsing a URL and returning data in a custom shape for each endpoint. It takes dozens of lines to mock a single endpoint that returns some realistic-looking data. With GraphQL, the shape is encoded in the query, and together with the schema we have enough information to mock the server with a single line of code.</p><p>Did I mention that this one line is all you need to return mock data for any valid GraphQL query you could send? Not just some valid query, any valid query<!-- -->! Pretty cool, right?</p><h2><a class="anchor" id="customizing-mock-data" name="customizing-mock-data"></a>Customizing mock data<a class="hash-link" href="#customizing-mock-data">#</a></h2><p>In the example above, the mock server will return completely random IDs and strings every time you query it. When you’ve just started building your app and only want to see what your UI code looks like in different states, that’s probably good enough, but as you start to fine-tune your layout, or want to use the mock server to test your component’s logic, you’ll probably need more realistic data.</p><p>Luckily, this takes only a little more effort: customization of mock data is really where the Apollo mocking tool shines, because it lets you customize virtually everything about the mock data that it returns.</p><p>It lets you do all of the following and more:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// customize mocking per type (i.e. Integer, Float, String)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">mockServer</span><span class="token punctuation">(</span><span class="token plain">schema</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  Int</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  Float</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">22.1</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  String</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// customize mocking per field in the schema (i.e. for Person.name and Person.age)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">mockServer</span><span class="token punctuation">(</span><span class="token plain">schema</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  Person</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    name</span><span class="token punctuation">:</span><span class="token plain"> casual</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    age</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> casual</span><span class="token punctuation">.</span><span class="token function">integer</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// mock lists of specific or random length( and lists of lists of lists …)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">mockServer</span><span class="token punctuation">(</span><span class="token plain">schema</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  Person</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// a list of length between 2 and 6</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    friends</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">MockList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// a list of three lists of two items: [[1, 1], [2, 2], [3, 3]]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    listOfLists</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">MockList</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">MockList</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// customize mocking of a field or type based on the query arguments</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">mockServer</span><span class="token punctuation">(</span><span class="token plain">schema</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  Person</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// the number of friends in the list now depends on numPages</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    paginatedFriends</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">o</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> numPages </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">MockList</span><span class="token punctuation">(</span><span class="token plain">numPages </span><span class="token operator">*</span><span class="token plain"> PAGE_SIZE</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// You can also disable mocking for specific fields, pass through to the backend, etc.</span></div></pre><p>For each type and each field you can provide a function that will be called on to generate mock data. Mock functions on fields have precedence over mock functions on types, but they work together really nicely: The field mock functions only need to describe the properties of the objects that matter to them, type mock functions will fill in the rest.</p><p>The mock functions are actually just GraphQL resolve functions in disguise. What that means is that your mocking can do anything that you could do inside a GraphQL resolve function. If you wanted, you could write your entire backend with it. I’m not saying you should, but you could.</p><p>I think the real power of this tool is that while it allows almost arbitrarily complex customization, you can get started really quickly and increase the sophistication of your mocks in tiny steps whenever you need it. Each step is so simple that it will feel like a breeze.</p><p>But enough talking, here’s a complete example:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> mockServer</span><span class="token punctuation">,</span><span class="token plain"> MockList </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;graphql-tools&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> casual </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;casual-browserify&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// The GraphQL schema. Described in more detail here: </span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// https://medium.com/apollo-stack/the-apollo-server-bc68762e93b</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> schema </span><span class="token operator">=</span><span class="token plain"> </span><span class="token template-string string">`</span></div><div class="token-line"><span class="token template-string string">  type User {</span></div><div class="token-line"><span class="token template-string string">    id: ID!</span></div><div class="token-line"><span class="token template-string string">    name: String</span></div><div class="token-line"><span class="token template-string string">    lists: [List]</span></div><div class="token-line"><span class="token template-string string">  }</span></div><div class="token-line"><span class="token template-string string">  type List {</span></div><div class="token-line"><span class="token template-string string">    id: ID!</span></div><div class="token-line"><span class="token template-string string">    name: String</span></div><div class="token-line"><span class="token template-string string">    owner: User</span></div><div class="token-line"><span class="token template-string string">    incomplete_count: Int</span></div><div class="token-line"><span class="token template-string string">    tasks(completed: Boolean): [Task]</span></div><div class="token-line"><span class="token template-string string">  }</span></div><div class="token-line"><span class="token template-string string">  type Task {</span></div><div class="token-line"><span class="token template-string string">    id: ID!</span></div><div class="token-line"><span class="token template-string string">    text: String</span></div><div class="token-line"><span class="token template-string string">    completed: Boolean</span></div><div class="token-line"><span class="token template-string string">    list: List</span></div><div class="token-line"><span class="token template-string string">  }</span></div><div class="token-line"><span class="token template-string string">  type RootQuery {</span></div><div class="token-line"><span class="token template-string string">    user(id: ID): User</span></div><div class="token-line"><span class="token template-string string">  }</span></div><div class="token-line"><span class="token template-string string">  schema {</span></div><div class="token-line"><span class="token template-string string">    query: RootQuery</span></div><div class="token-line"><span class="token template-string string">  }</span></div><div class="token-line"><span class="token template-string string">`</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Mock functions are defined per type and return an</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// object with some or all of the fields of that type.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// If a field on the object is a function, that function</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// will be used to resolve the field if the query requests it.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> server </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">mockServer</span><span class="token punctuation">(</span><span class="token plain">schema</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  RootQuery</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    user</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">o</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> id </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> id </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  List</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> casual</span><span class="token punctuation">.</span><span class="token plain">word</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    tasks</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">MockList</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">o</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> completed </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> completed </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  Task</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> text</span><span class="token punctuation">:</span><span class="token plain"> casual</span><span class="token punctuation">.</span><span class="token function">words</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  User</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> casual</span><span class="token punctuation">.</span><span class="token plain">name </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain">mockServer</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string string">`</span></div><div class="token-line"><span class="token template-string string">query tasksForUser{</span></div><div class="token-line"><span class="token template-string string">  user(id: 6) {</span></div><div class="token-line"><span class="token template-string string">    id</span></div><div class="token-line"><span class="token template-string string">    name</span></div><div class="token-line"><span class="token template-string string">    lists {</span></div><div class="token-line"><span class="token template-string string">      name</span></div><div class="token-line"><span class="token template-string string">      completeTasks: tasks(completed: true) {</span></div><div class="token-line"><span class="token template-string string">        completed</span></div><div class="token-line"><span class="token template-string string">        text</span></div><div class="token-line"><span class="token template-string string">      }</span></div><div class="token-line"><span class="token template-string string">      incompleteTasks: tasks(completed: false) {</span></div><div class="token-line"><span class="token template-string string">        completed</span></div><div class="token-line"><span class="token template-string string">        text</span></div><div class="token-line"><span class="token template-string string">      }</span></div><div class="token-line"><span class="token template-string string">      anyTasks: tasks {</span></div><div class="token-line"><span class="token template-string string">        completed</span></div><div class="token-line"><span class="token template-string string">        text</span></div><div class="token-line"><span class="token template-string string">      }</span></div><div class="token-line"><span class="token template-string string">    }</span></div><div class="token-line"><span class="token template-string string">  }</span></div><div class="token-line"><span class="token template-string string">}`</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><h2><a class="anchor" id="live-demo-try-it-yourself" name="live-demo-try-it-yourself"></a>Live demo + try it yourself<a class="hash-link" href="#live-demo-try-it-yourself">#</a></h2><p>To see the example in action and see what output it generates, head over to the <a href="https://launchpad.graphql.com/98lq7vz8r" target="_blank" rel="nofollow noopener noreferrer">live demo</a> try running some queries<!-- -->!</p><p>If you want to fiddle around with the example, just click the &quot;Download&quot; button in the Launchpad UI. If you’re curious about how it works or want to see what other tools we’re building for GraphQL, then head over to <a href="https://github.com/apollostack/graphql-tools" target="_blank" rel="nofollow noopener noreferrer">apollostack/graphql-tools</a>.</p><p>Pretty cool, right? All of that becomes possible by using a type system. And that’s only just the beginning — we‘re working on bridging the gap between mocking and the real thing so that your mock server can gradually turn into your real server as you add more functionality to it.</p><hr/><p><em>This post was originally published on <a href="https://medium.com/apollo-stack" target="_blank" rel="nofollow noopener noreferrer">the Apollo Blog</a>. We publish one or two posts every week, about the stuff we’re working on and thinking about.</em></p></div></div><div class="inner-content"><h1><a href="/blog/subscriptions-in-graphql-and-relay/">Subscriptions in GraphQL and Relay</a></h1><p>10/16/2015<!-- --> by <!-- -->Dan Schafer and Laney Kuenzel</p><hr/><div><p>When we announced and open-sourced GraphQL and Relay this year, we described how they can be used to perform reads with queries, and to perform writes with mutations. However, oftentimes clients want to get pushed updates from the server when data they care about changes. To support that, we’ve introduced a third operation into the GraphQL specification: subscription.</p><h2><a class="anchor" id="event-based-subscriptions" name="event-based-subscriptions"></a>Event-based subscriptions<a class="hash-link" href="#event-based-subscriptions">#</a></h2><p>The approach that we’ve taken to subscriptions parallels that of mutations; just as the list of mutations that the server supports describes all of the actions that a client can take, the list of subscriptions that the server supports describes all of the events that it can subscribe to. Just as a client can tell the server what data to refetch after it performs a mutation with a GraphQL selection, the client can tell the server what data it wants to be pushed with the subscription with a GraphQL selection.</p><p>For example, in the Facebook schema, we have a mutation field named <code>storyLike</code>, that clients can use to like a post. The client might want to refetch the like count, as well as the like sentence (“Dan and 3 others like this”. We do this translation on the server because of the complexity of that translation in various languages). To do so, they would issue the following mutation:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain">mutation </span><span class="token function">StoryLikeMutation</span><span class="token punctuation">(</span><span class="token plain">$input</span><span class="token punctuation">:</span><span class="token plain"> StoryLikeInput</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">storyLike</span><span class="token punctuation">(</span><span class="token plain">input</span><span class="token punctuation">:</span><span class="token plain"> $input</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    story </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      likers </span><span class="token punctuation">{</span><span class="token plain"> count </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      likeSentence </span><span class="token punctuation">{</span><span class="token plain"> text </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><p>But when you’re looking at a post, you also want to get pushed an update whenever someone else likes the post<!-- -->! That’s where subscriptions come in; the Facebook schema has a subscription field named <code>storyLikeSubscribe</code> that allows the client to get pushed data anytime someone likes or unlikes that story<!-- -->! The client would create a subscription like this:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain">subscription </span><span class="token function">StoryLikeSubscription</span><span class="token punctuation">(</span><span class="token plain">$input</span><span class="token punctuation">:</span><span class="token plain"> StoryLikeSubscribeInput</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">storyLikeSubscribe</span><span class="token punctuation">(</span><span class="token plain">input</span><span class="token punctuation">:</span><span class="token plain"> $input</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    story </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      likers </span><span class="token punctuation">{</span><span class="token plain"> count </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      likeSentence </span><span class="token punctuation">{</span><span class="token plain"> text </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><p>The client would then send this subscription to the server, along with the value for the <code>$input</code> variable, which would contain information like the story ID to which we are subscribing:</p><pre class="prism prism-code language-graphql"><div class="token-line"><span class="token type-def keyword">input</span><span class="token type-def"> StoryLikeSubscribeInput </span><span class="token type-def fields punctuation">{</span><span class="token type-def fields"></span></div><div class="token-line"><span class="token type-def fields">  </span><span class="token type-def fields attr-name">storyId</span><span class="token type-def fields punctuation">:</span><span class="token type-def fields"> </span><span class="token type-def fields type-name">string</span><span class="token type-def fields"></span></div><div class="token-line"><span class="token type-def fields">  </span><span class="token type-def fields attr-name">clientSubscriptionId</span><span class="token type-def fields punctuation">:</span><span class="token type-def fields"> </span><span class="token type-def fields type-name">string</span><span class="token type-def fields"></span></div><div class="token-line"><span class="token type-def fields"></span><span class="token type-def fields punctuation">}</span></div></pre><p>At Facebook, we send this query to the server at build time to generate a unique ID for it, then subscribe to a special MQTT topic with the subscription ID in it, but many different subscription mechanisms could be used here.</p><p>On the server, we then trigger this subscription every time someone likes a post. If all of our clients were using GraphQL, we could put this hook in the GraphQL mutation; since we have non-GraphQL clients as well, we put the hook in a layer below the GraphQL mutation to ensure it always fires.</p><h2><a class="anchor" id="why-not-live-queries" name="why-not-live-queries"></a>Why not Live Queries?<a class="hash-link" href="#why-not-live-queries">#</a></h2><p>Notably, this approach requires the client to subscribe to events that it cares about. Another approach is to have the client subscribe to a query, and ask for updates every time the result of that query changes. Why didn’t we take that approach?</p><p>Let’s look back at the data we wanted to refetch for the story:</p><pre class="prism prism-code language-javascript"><div class="token-line"><span class="token plain">fragment StoryLikeData on Story </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  story </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    likers </span><span class="token punctuation">{</span><span class="token plain"> count </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    likeSentence </span><span class="token punctuation">{</span><span class="token plain"> text </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><p>What events could trigger that a change to the data fetched in that fragment?</p><ul><li>Someone likes the post.</li><li>Someone unlikes the post.</li><li>Someone who had liked the post deactivates their account (changes the like count down one, changes the like sentence to decrement the translated count).</li><li>Someone who had liked the post reactivates their account (changes the like count up one, changes the like sentence to increment the translated count).</li><li>Someone who had liked the post blocks you (cannot show them in the like sentence).</li><li>Someone who had liked the post changes their name (need to update the text of the like sentence).</li><li>Our internal ranking model for the ordering of names in the like sentence updates, and we should be listing a different person first (want to update the text of the like sentence).</li></ul><p>And that’s just the tip of the iceberg in terms of events; each of those events also becomes tricky when there are thousands of people subscribed, and millions of people who liked the post. Implementing live queries for this set of data proved to be immensely complicated.</p><p>When building event-based subscriptions, the problem of determining what should trigger an event is easy, since the event defines that explicitly. It also proved fairly straight-forward to implement atop existing message queue systems. For live queries, though, this appeared much harder. The value of our fields is determined by the result of their resolve function, and figuring out all of the things that could alter the result of that function was difficult. We could in theory have polled on the server to implement this, but that had efficiency and timeliness issues. Based on this, we decided to invest in the event-based subscription approach.</p><h2><a class="anchor" id="what-s-next" name="what-s-next"></a>What’s next?<a class="hash-link" href="#what-s-next">#</a></h2><p>We’re actively building out the event-based subscription approach described above. We’ve built out live liking and commenting features on our iOS and Android apps using that approach, and are continuing to flesh out its functionality and API. While its current implementation at Facebook is coupled to Facebook’s infrastructure, we’re certainly looking forward to open sourcing our progress here as soon as we can.</p><p>Because our backend and schema don’t offer easy support for live queries, we don’t have any plans to develop them at Facebook. At the same time, it’s clear that there are backends and schemas for which live queries are feasible, and that they offer a lot of value in those situations. The discussion in the community on this topic has been fantastic, and we’re excited to see what kind of live query proposals emerge from it<!-- -->!</p><p>Subscriptions create a ton of possibilities for creating truly dynamic applications. We’re excited to continue developing GraphQL and Relay with the help of the community to enable these possibilities.</p></div></div><div class="inner-content"><h1><a href="/blog/graphql-a-query-language/">GraphQL: A data query language</a></h1><p>9/14/2015<!-- --> by <!-- -->Lee Byron</p><hr/><div><p>When we built Facebook&#x27;s mobile applications, we needed a data-fetching API powerful enough to describe all of Facebook, yet simple and easy to learn so product developers can focus on building things quickly. We developed GraphQL three years ago to fill this need. Today it powers hundreds of billions of API calls a day. This year we&#x27;ve begun the process of open-sourcing GraphQL by drafting a specification, releasing a reference implementation, and forming a community around it here at <a href="http://graphql.org/" target="_blank" rel="nofollow noopener noreferrer">graphql.org</a>.</p><h2><a class="anchor" id="why-graphql" name="why-graphql"></a>Why GraphQL?<a class="hash-link" href="#why-graphql">#</a></h2><p>Back in 2012, we began an effort to rebuild Facebook&#x27;s native mobile applications.</p><p>At the time, our iOS and Android apps were thin wrappers around views of our mobile website. While this brought us close to a platonic ideal of the &quot;write one, run anywhere&quot; mobile application, in practice it pushed our mobile-webview apps beyond their limits. As Facebook&#x27;s mobile apps became more complex, they suffered poor performance and frequently crashed.</p><p>As we transitioned to natively implemented models and views, we found ourselves for the first time needing an API data version of News Feed — which up until that point had only been delivered as HTML. We evaluated our options for delivering News Feed data to our mobile apps, including RESTful server resources and FQL tables (Facebook&#x27;s SQL-like API). We were frustrated with the differences between the data we wanted to use in our apps and the server queries they required. We don&#x27;t think of data in terms of resource URLs, secondary keys, or join tables; we think about it in terms of a graph of objects and the models we ultimately use in our apps like NSObjects or JSON.</p><p>There was also a considerable amount of code to write on both the server to prepare the data and on the client to parse it. This frustration inspired a few of us to start the project that ultimately became GraphQL. GraphQL was our opportunity to rethink mobile app data-fetching from the perspective of product designers and developers. It moved the focus of development to the client apps, where designers and developers spend their time and attention.</p><h2><a class="anchor" id="what-is-graphql" name="what-is-graphql"></a>What is GraphQL?<a class="hash-link" href="#what-is-graphql">#</a></h2><p>A GraphQL query is a string that is sent to a server to be interpreted and fulfilled, which then returns JSON back to the client.</p><div class="miniGraphiQL"><div class="query-editor"></div><div class="result-window"></div></div><p><strong>Defines a data shape:</strong> The first thing you&#x27;ll notice is that GraphQL queries mirror their response. This makes it easy to predict the shape of the data returned from a query, as well as to write a query if you know the data your app needs. More important, this makes GraphQL really easy to learn and use. GraphQL is unapologetically driven by the data requirements of products and of the designers and developers who build them.</p><p><strong>Hierarchical:</strong> Another important aspect of GraphQL is its hierarchical nature. GraphQL naturally follows relationships between objects, where a RESTful service may require multiple round-trips (resource-intensive on mobile networks) or a complex join statement in SQL. This data hierarchy pairs well with graph-structured data stores and ultimately with the hierarchical user interfaces it&#x27;s used within.</p><p><strong>Strongly typed:</strong> Each level of a GraphQL query corresponds to a particular type, and each type describes a set of available fields. Similar to SQL, this allows GraphQL to provide descriptive error messages before executing a query. It also plays well with the strongly typed native environments of Obj-C and Java.</p><p><strong>Protocol, not storage:</strong> Each GraphQL field on the server is backed by a function - code linking to your application layer. While we were building GraphQL to support News Feed, we already had a sophisticated feed ranking and storage model, along with existing databases and business logic. GraphQL had to leverage all this existing work to be useful, and so does not dictate or provide any backing storage. Instead, GraphQL takes advantage of your existing code by exposing your application layer, not your storage layer.</p><p><strong>Introspective:</strong> A GraphQL server can be queried for the types it supports. This creates a powerful platform for tools and client software to build atop this information like code generation in statically typed languages, our application framework, Relay, or IDEs like GraphiQL (pictured below). GraphiQL helps developers learn and explore an API quickly without grepping the codebase or wrangling with cURL.</p><div class="miniGraphiQL"><div class="query-editor"></div><div class="result-window"></div></div><p><strong>Version free:</strong> The shape of the returned data is determined entirely by the client&#x27;s query, so servers become simpler and easy to generalize. When you&#x27;re adding new product features, additional fields can be added to the server, leaving existing clients unaffected. When you&#x27;re sunsetting older features, the corresponding server fields can be deprecated but continue to function. This gradual, backward-compatible process removes the need for an incrementing version number. We still support three years of released Facebook applications on a single version of our GraphQL API.</p><p>With GraphQL, we were able to build full-featured native News Feed on iOS in 2012, and on Android shortly after. Since then, GraphQL has become the primary way we build our mobile apps and the servers that power them. More than three years later, GraphQL powers almost all data-fetching in our mobile applications, serving millions of requests per second from nearly 1,000 shipped application versions.</p><p>When we built GraphQL in 2012 we had no idea how important it would become to how we build things at Facebook and didn&#x27;t anticipate its value beyond Facebook. However earlier this year we announced Relay, our application framework for the web and React Native built atop GraphQL. The community excitement for Relay inspired us to revisit GraphQL to evaluate every detail, make improvements, fix inconsistencies, and write a specification describing GraphQL and how it works.</p><p>Two months ago, we <a href="https://www.youtube.com/watch?v=WQLzZf34FJ8" target="_blank" rel="nofollow noopener noreferrer">made our progress public</a> and released a working draft of the <a href="http://facebook.github.io/graphql/" target="_blank" rel="nofollow noopener noreferrer">GraphQL spec</a> and a reference implementation: <a href="https://github.com/graphql/graphql-js" target="_blank" rel="nofollow noopener noreferrer">GraphQL.js</a>. Since then, a community has started to form around GraphQL, and versions of the GraphQL runtime are being <a href="https://github.com/chentsulin/awesome-graphql" target="_blank" rel="nofollow noopener noreferrer">built in many languages</a>, including Go, Ruby, Scala, Java, .Net, and Python. We&#x27;ve also begun to share some of the tools we use internally, like <a href="https://github.com/graphql/graphiql" target="_blank" rel="nofollow noopener noreferrer">GraphiQL</a>, an in-browser IDE, documentation browser, and query runner. GraphQL has also seen production usage outside Facebook, in a project for the <a href="https://www.youtube.com/watch?v=S0s935RKKB4" target="_blank" rel="nofollow noopener noreferrer"><em>Financial Times</em></a> by consultancy <a href="http://red-badger.com/" target="_blank" rel="nofollow noopener noreferrer">Red Badger</a>.</p><p>“GraphQL makes orchestrating data fetching so much simpler and it pretty much functions as a perfect isolation point between the front end and the back end”
— Viktor Charypar, software engineer at Red Badger</p><p>While GraphQL is an established part of building products at Facebook, its use beyond Facebook is just beginning. Try out <a href="http://graphql-swapi.parseapp.com/graphiql/" target="_blank" rel="nofollow noopener noreferrer">GraphiQL</a> and help provide feedback on our <a href="https://github.com/facebook/graphql/" target="_blank" rel="nofollow noopener noreferrer">specification</a>. We think GraphQL can greatly simplify data needs for both client product developers and server-side engineers, regardless of what languages you&#x27;re using in either environment, and we&#x27;re excited to continue to improve GraphQL, help a community grow around it, and see what we can build together.</p></div></div></div><div class="nav-docs"><div class="nav-docs-section"><h3>Subscribe</h3><a rel="home" type="application/rss+xml" href="/blog/rss.xml">RSS</a></div><div class="nav-docs-section"><h3>Recent Posts</h3><ul><li><a href="/blog/production-ready/">Leaving technical preview</a></li><li><a href="/blog/rest-api-graphql-wrapper/">Wrapping a REST API in GraphQL</a></li><li><a href="/blog/mocking-with-graphql/">Mocking your server is easy with GraphQL</a></li><li><a href="/blog/subscriptions-in-graphql-and-relay/">Subscriptions in GraphQL and Relay</a></li><li><a href="/blog/graphql-a-query-language/">GraphQL: A data query language</a></li></ul></div></div></div></section><div><footer><section class="sitemap"><a class="nav-home" aria-label="Homepage" href="/"></a><div><h5><a href="/learn/">学习</a></h5><a href="/learn/">入门</a><a href="/learn/queries/">查询语言</a><a href="/learn/schema/">类型系统</a><a href="/learn/execution/">执行</a><a href="/learn/best-practices/">最佳实践</a></div><div><h5><a href="/code">代码</a></h5><a href="/code/#server-libraries">服务端</a><a href="/code/#graphql-clients">客户端</a><a href="/code/#tools">工具</a></div><div><h5><a href="/community">社区</a></h5><a href="/community/upcoming-events/">即将到来的活动</a><a href="http://stackoverflow.com/questions/tagged/graphql" target="_blank" rel="noopener noreferrer">Stack Overflow</a><a href="https://www.facebook.com/groups/graphql.community/" target="_blank" rel="noopener noreferrer">Facebook Group</a><a href="https://twitter.com/GraphQL" target="_blank" rel="noopener noreferrer">Twitter</a></div><div><h5>More</h5><a href="/https://graphql.github.io/graphql-spec/">GraphQL 规范</a><a href="https://foundation.graphql.org/" target="_blank" rel="noopener noreferrer">GraphQL 基金会</a><a href="https://github.com/graphql" target="_blank" rel="noopener noreferrer">GraphQL GitHub</a><a href="https://github.com/graphql/graphql.github.io/edit/source/src/pages/blog.tsx" target="_blank" rel="noopener noreferrer">编辑本页 ✎</a></div></section><section class="copyright">Copyright © <!-- -->2021<!-- --> GraphQL 基金会。保留所有权利。Linux 基金会已经注册了商标和使用商标。有关 Linux 基金会的商标清单，请参阅我们的 <a href="https://www.linuxfoundation.org/trademark-usage">商标使用</a> 页面。Linux 是 Linus Torvalds 的注册商标。<a href="http://www.linuxfoundation.org/privacy">隐私政策</a> 和 <a href="http://www.linuxfoundation.org/terms">使用条款</a>。</section></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-44373548-16', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-e764609432e24145d8f2.js"],"app":["/app-b8e5291ffc8a07998bdc.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-e0e30c95c9ad200b8d55.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-81e1bc2b4a73b79d65fe.js"],"component---src-pages-users-tsx":["/component---src-pages-users-tsx-fa66165f2df80e5c7453.js"],"component---src-templates-doc-tsx":["/component---src-templates-doc-tsx-410b646e4a18c3e5a4ee.js"]};/*]]>*/</script><script src="/polyfill-e764609432e24145d8f2.js" nomodule=""></script><script src="/component---src-pages-blog-tsx-e0e30c95c9ad200b8d55.js" async=""></script><script src="/427401584d862020e248f9ac9601f576799623ba-ceb172f88d4d2a2376f4.js" async=""></script><script src="/031ea306f037722fb1dd352c81fe440e5bcacbbc-16e6aa699a430d5d6825.js" async=""></script><script src="/commons-82126b8c29a48840ab48.js" async=""></script><script src="/f65a48b9-fb6134736a4f5f393795.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-b8e5291ffc8a07998bdc.js" async=""></script><script src="/framework-1bcdbcdd30f43763a25c.js" async=""></script><script src="/webpack-runtime-5f078ac1e265d8de4fe5.js" async=""></script></body></html>